name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions

permissions:
  contents: write

on:
  push:
    branches: main

jobs:

  move-page-content-to-page-branch:
    runs-on: ubuntu-latest
    steps:

      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          ref: 'refs/heads/page'

      - name: Set Git User Info
        run: |
          git config user.email "linhieng@qq.com"
          git config user.name "linhieng"

      - name: move page content to branch page
        run: |
          git remote -v
          git branch
          git remote set-url origin https://github.com/Linhieng/test.git
          git fetch main:tmp
          git checkout tmp -- page
          mv page/* .
          git add .
          git commit -m "deploy"
          git push
